<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Snapeek Notes (PDFs)</title>
  <link rel="stylesheet" href="/public/styles.css">
  <style>
    body { font-family: Arial, sans-serif; background: #f7f7f7; }
    .navbar { background: #222; color: #fff; padding: 1em; display: flex; gap: 2em; }
    .navbar a { color: #fff; text-decoration: none; font-weight: bold; }
    .container { max-width: 900px; margin: 2em auto; background: #fff; padding: 2em; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 2em; }
    .card { background: #f0f0f0; border-radius: 8px; padding: 1em; box-shadow: 0 1px 4px rgba(0,0,0,0.07); display: flex; flex-direction: column; align-items: center; }
    .card .pdf-icon { font-size: 3em; color: #d32f2f; margin-bottom: 0.5em; }
    .card .filename { font-weight: bold; margin-bottom: 0.5em; }
    .card .actions { display: flex; gap: 1em; }
    .card button, .card a { padding: 0.5em 1em; border: none; border-radius: 4px; background: #1976d2; color: #fff; cursor: pointer; text-decoration: none; font-size: 1em; }
    .card button:hover, .card a:hover { background: #1565c0; }
  </style>
</head>
<body>
  <nav class="navbar">
    <a href="/">Gallery</a>
    <a href="/download.html">Download</a>
    <a href="/notes.html">Notes</a>
    <a href="/login">Login</a>
  </nav>
  <div class="container">
    <h2>All Notes (PDFs)</h2>
    <div id="pdfGrid" class="grid"></div>
  </div>
  <script>
    async function fetchPDFs() {
      const res = await fetch('/pdfs/api/folders');
      const data = await res.json();
      const grid = document.getElementById('pdfGrid');
      grid.innerHTML = '';
      let cards = [];
      Object.keys(data).forEach(user => {
        data[user].forEach(pdf => {
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            <div class="pdf-icon">ðŸ“„</div>
            <div class="filename">${pdf.filename}</div>
            <div class="actions">
              <a href="${pdf.url}" target="_blank">View</a>
              <a href="/download/pdf/${user}/${encodeURIComponent(pdf.filename)}">Download</a>
            </div>
            <div style="font-size:0.9em;color:#888;margin-top:0.5em;">User: ${user}</div>
          `;
          cards.push(card);
        });
      });
      if (cards.length === 0) {
        grid.innerHTML = '<p>No notes (PDFs) found.</p>';
      } else {
        cards.forEach(card => grid.appendChild(card));
      }
    }
    fetchPDFs();
  </script>
</body>
</html>
